var pictures=document.querySelectorAll(".alex-box"),i=-1,currentGallery="",currentState="block",galleria,dirSwipe;window.addEventListener("keydown",notArrows);function notArrows(a){a.preventDefault()}pictures.forEach(a=>{a.addEventListener("click",function(){open(this)}),a.addEventListener("touch",function(){open(this)})});function createModal(a,b){if("video"==b){var c=document.createElement("source"),d=document.createAttribute("src");d.value=a;var f=document.createAttribute("type");f.value="video/mp4",c.setAttributeNode(d),c.setAttributeNode(f);var g=document.createElement("video"),h=document.createAttribute("controls");g.setAttributeNode(h),g.classList.add("video","enterEffect"),g.addEventListener("click",clickedPic),g.appendChild(c),swipedetect(g,function(p){dirSwipe=p,console.log(p),"left"==p?(g.classList.remove("enterEffect"),g.classList.add("swipeLeft")):"right"==p&&(g.classList.remove("enterEffect"),g.classList.add("swipeRight")),setTimeout(keypressed,200),"none"==p&&toggleArrows()})}else{var j=document.createElement("img");j.src=a,j.classList.add("foto","enterEffect"),j.addEventListener("click",clickedPic),j.addEventListener("click",toggleArrows),swipedetect(j,function(p){dirSwipe=p,"left"==p?(j.classList.remove("enterEffect"),j.classList.add("swipeLeft")):"right"==p&&(j.classList.remove("enterEffect"),j.classList.add("swipeRight")),setTimeout(keypressed,200),"up"==p?(j.classList.remove("enterEffect"),j.classList.add("swipeUp"),setTimeout(close,350)):"down"==p?(j.classList.remove("enterEffect"),j.classList.add("swipeDown"),setTimeout(close,350)):"none"==p&&toggleArrows()})}var k=document.createElement("div");k.classList.add("x"),k.style.display=currentState,k.addEventListener("click",function(){close()});var l=document.createElement("div");l.classList.add("lBtn"),l.style.display=currentState,l.addEventListener("click",function(){arrow(this)});var m=document.createElement("div");m.classList.add("rBtn"),m.style.display=currentState,m.addEventListener("click",function(){arrow(this)});var o=document.createElement("div");o.classList.add("modal"),o.addEventListener("click",clicked),document.addEventListener("keydown",keypressed),o.appendChild(k),o.appendChild(l),o.appendChild(m),"video"==b?o.appendChild(g):o.appendChild(j),body=document.querySelector("body"),body.appendChild(o),body.style.overflow="hidden"}function clicked(){close()}function toggleArrows(){var a=document.querySelectorAll(".lBtn, .rBtn, .x");"block"==currentState?(a[0].style.display="none",a[1].style.display="none",a[2].style.display="none",currentState="none"):(a[0].style.display="block",a[1].style.display="block",a[2].style.display="block",currentState="block")}function clickedPic(){event.stopPropagation()}function open(a){event&&event.preventDefault(),a.classList.add("opened");var b=a.getAttribute("type");currentGallery=a.getAttribute("gallery-alex-box"),b?createModal(a.getAttribute("href"),b):createModal(a.getAttribute("href")),pictures.forEach(function(c,d){c===a&&(i=d)})}function close(){pictures.forEach(a=>{if(a.classList.contains("opened")){a.classList.remove("opened");var b=document.querySelector(".modal");b.parentNode.removeChild(b),document.removeEventListener("keydown",keypressed)}}),dirSwipe="",body.style.overflow="auto"}function keypressed(a){if(a)var b=a.charCode||a.keyCode;37==b||40==b||"left"==dirSwipe?(a&&a.preventDefault(),close(),open(pictures[previous(i,currentGallery)])):39==b||38==b||"right"==dirSwipe?(a&&a.preventDefault(),close(),open(pictures[next(i,currentGallery)])):27==b&&(a&&a.preventDefault(),close())}function previous(a,b){var c=0>=a?pictures.length-1:a-1;return pictures[c].getAttribute("gallery-alex-box")==b?c:previous(c,b)}function next(a,b){var c=a>=pictures.length-1?0:a+1;return pictures[c].getAttribute("gallery-alex-box")==b?c:next(c,b)}function arrow(a){event.stopPropagation(),close(),a.classList.contains("lBtn")?open(pictures[previous(i,currentGallery)]):open(pictures[next(i,currentGallery)])}function swipedetect(a,b){var d,f,g,h,j,o,p,c=a,k=5,l=50,q=b||function(){};c.addEventListener("touchstart",function(r){var s=r.changedTouches[0];d="none",dist=0,f=s.pageX,g=s.pageY,p=new Date().getTime(),r.preventDefault()},!1),c.addEventListener("touchmove",function(r){r.preventDefault()},!1),c.addEventListener("touchend",function(r){var s=r.changedTouches[0];h=s.pageX-f,j=s.pageY-g,o=new Date().getTime()-p,o<=600&&(Math.abs(h)>=k&&Math.abs(j)<=l?d=0>h?"left":"right":Math.abs(j)>=k&&Math.abs(h)<=l&&(d=0>j?"up":"down")),q(d),r.preventDefault()},!1)}